<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Îndrăznește să crezi!</title>
        <meta name="description" content="Noi suntem generația care o să vă oprească">
        <meta name="keywords" content="neamsaturat,rezist,nuscăpați">

        <link rel="shortcut icon" href="/static/favicon.png" type="image/png">
        <link rel="icon" href="/favicon.ico" type="image/icon">

        <meta property="og:title" content="Îndrăznește să crezi!">
        <meta property="og:description" content="Noi suntem generația care o să vă oprească">
        <meta property="og:url" content="https://www.rezist.ro/">
        <meta property="og:type" content="website">
        <meta property="og:image" content="/static/cover.jpeg">
        <meta property="fb:app_id" content="1939917809593618">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <style type="text/css">
#map {
    height: 100%;
}

html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

.gm-style-iw {
    left: 25px !important;
    top: 15px !important;
}


@import url("https://fonts.googleapis.com/css?family=Roboto");

.info-box {
  font-family: Roboto, Arial, sans-serif;
  line-height: 1.4;
  font-weight: 400;
}

.info-box a {
  color: #2980B9;
  text-decoration: none;
  -webkit-transition: color 200ms ease;
  transition: color 200ms ease;
}
.info-box a:hover {
  color: #EB6B56;
}

.info-box__cover {
  display: block;
  width: 100%;
  overflow: hidden;
  max-height: 150px;
  position: relative;
}

.info-box__cover-image {
  display: block;
  width: 100%;
}

.info-box__date {
  text-align: center;
  max-width: 3rem;
  background: #fff;
}

.info-box__date-month {
  color: #fff;
  background: #FC575E;
  padding: 0 .75rem;
  font-weight: 300;
  text-transform: uppercase;
  font-size: 0.75rem;
}

.info-box__date-day {
  color: #000;
  font-size: 1.15rem;
}

.info-box__intro {
  background: #ECF0F1;
  padding: 0.5rem 1rem;
  margin-bottom: 0.75rem;
}

.info-box__details {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-line-pack: center;
      align-content: center;
  margin-bottom: 0.5rem;
}

.info-box__location {
  -ms-flex-item-align: center;
      -ms-grid-row-align: center;
      align-self: center;
  padding: 0.25rem 0.5rem;
}

.info-box__time {
  display: block;
  font-size: 0.75rem;
  color: rgba(0, 0, 0, 0.4);
}

.info-box__title {
  display: block;
  font-size: 1.15rem;
  padding-bottom: 0.5rem;
}

.info-box__attendants {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: justify;
      -ms-flex-pack: justify;
          justify-content: space-between;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  color: rgba(0, 0, 0, 0.4);
  padding-top: 0.5rem;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.info-box__attendants span {
  font-size: 0.75rem;
}

a.info-box__share {
  color: #fff;
  background: #2980B9;
  padding: 0 0.5rem;
  border-radius: 0.25rem;
  -webkit-transition: background 200ms ease;
  transition: background 200ms ease;
}

a.info-box__share:hover {
  color: #fff;
  background: #EB6B56;
}

.info-box__description {
  margin: 0 0 2rem;
  white-space: pre-line;
}
        </style>
    </head>
    <body>
        <div id="map"></div>
        <script type="text/javascript">
var events = {{ events|tojson }};
var address = {{ country|tojson }} +  ", " + {{ region|tojson }};


window.oug13 = function() {
    var map;
    var coder = new google.maps.Geocoder();
    coder.geocode({address: address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map = new google.maps.Map(document.getElementById("map"), {
                mapTypeId: "roadmap",
                center: results[0].geometry.location
            });
            try {
                map.fitBounds(results[0].geometry.bounds);
            } catch(err) {
                map.fitBounds(new google.maps.LatLngBounds(
                    new google.maps.LatLng(43.6186193, 20.2617593),
                    new google.maps.LatLng(48.265274, 29.7784)
                ));
            }
        } else {
            // romania
            map = new google.maps.Map(document.getElementById("map"), {
                mapTypeId: "roadmap",
                center: {
                    lat: 45.943161,
                    lng: 24.96676
                }
            });
            map.fitBounds(new google.maps.LatLngBounds(
                new google.maps.LatLng(43.6186193, 20.2617593),
                new google.maps.LatLng(48.265274, 29.7784)
            ));
        }

        var views = {};
        var markers = {};
        var open = null;
        events.forEach(function(event) {
            markers[event.id] = new google.maps.Marker({
                map: map,
                position: new google.maps.LatLng(event.lat, event.lng),
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: 'red',
                    fillOpacity: .2,
                    scale: 5 + 5 * Math.log10(event.attending_count) +
                        Math.log10(event.interested_count),
                    strokeColor: 'white',
                    strokeWeight: .5
                }
            });
            views[event.id] = new google.maps.InfoWindow({
                content: event.html,
                maxWidth: 350
            });
            markers[event.id].addListener("click", function() {
                if(open)
                    views[open].close(map, markers[open]);

                if(open === event.id) {
                    history.pushState(null, event.name, "#");
                    open = null;
                } else {
                    open = event.id;
                    views[open].open(map, markers[open]);
                    history.pushState(null, event.name, "#" + event.id);
                }
            });
            views[event.id].addListener("closeclick", function() {
                if(open === event.id) {
                    history.pushState(null, event.name, "#");
                    open = null;
                }
            });
        });

        var sync = function(e) {
            if(window.location.hash.length > 1) {
                event = window.location.hash.substring(1);
                if(open === event) return;
                if(open)
                    views[open].close(map, markers[open])
                open = event;
                views[open].open(map, markers[open]);
            } else if(open) {
                views[open].close(map, markers[open]);
                open = null;
            }
        }
        window.addEventListener("popstate", sync);
        sync();
    });
}
            </script>
            <script async defer
        src="https://maps.googleapis.com/maps/api/js?key={{ maps_key }}&callback=oug13">
        </script>
        <!--footer>
            <a title="This product includes GeoLite data created by MaxMind" href="http://www.maxmind.com">
                <img alt="" src="/static/maxmind-logo.png">
            </a>
        </footer-->
    </body>
</html>
